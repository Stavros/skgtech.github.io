!function(){function e(t,n,a){function i(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n||e)},u,u.exports,e,t,n,a)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<a.length;s++)i(a[s]);return i}return e}()({1:[function(e,t,n){var a=e("./calendar"),i=e("./slack");e("./theme"),e("./newsletter");var r=new a;r.init();var s=new i;s.init({emailField:".slack-email",cta:".slack-submit",form:".slack-form"})},{"./calendar":2,"./newsletter":3,"./slack":4,"./theme":5}],2:[function(e,t,n){var a=e("calendarth"),i=e("./util"),r=t.exports=function(){this.$eventsContainer=null,this.$eventItem=null,this.$error=null};r.MAX_EVENTS_SHOW=8,r.MAX_FUTURE_EVENT=5184e6,r.prototype.init=function(){this.$eventsContainer=$("#upcoming-events"),this.$eventItem=$("#event-item"),this.$error=$("#agenda-error"),this.calendarth=a({apiKey:"AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w",calendarId:"2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com",maxResults:12}),this.calendarth.fetch(this._handleCalResult.bind(this))},r.prototype._handleCalResult=function(e,t){if(this.$eventsContainer.empty(),e)return void this.$eventsContainer.append(this.$error.clone().removeClass("hide"));var n=[],a=0,i="";t.items.forEach(function(e){var t=new Date(e.start.dateTime),s=t-Date.now();s>r.MAX_FUTURE_EVENT||a>=r.MAX_EVENTS_SHOW||n.indexOf(e.summary)>-1||(n.push(e.summary),i+=this._assignValues(this.$eventItem.clone(),e),a++)},this),i+="",this.$eventsContainer.append(i),$(".upcoming_events").length&&$(".upcoming_events").imagesLoaded(function(){$("#upcoming-events").isotope({itemSelector:".upcoming_events",layoutMode:"masonry",masonry:{columnWidth:".upcoming_events_sizer"}})})},r.prototype._assignValues=function(e,t){e.find("div.upcoming_events").removeClass("hide");var n=e.find(".event_title span"),a=e.find(".upcoming_label.label span"),r=e.find(".event_time_loc .location"),s=e.find(".event_summery"),o=e.find(".event_title a"),l=e.find(".event_cover_photo img"),c=e.find(".facebook-url"),u=e.find(".twitter-url"),m=this._parseDesc(t.description);m.image?l.attr("src",m.image):l.attr("src","/assets/img/placeholders/event_image_placeholder.jpg"),n.text(t.summary);var d=i.getDate(t.start)+" - "+i.getTime(t.start);a.text(d);var h=null,f=null;if(h=m.venue?m.venue:t.location,m.mapUrl?(f='<a href="'+m.mapUrl+'" target="_blank">',f+=h,f+="</a>"):f=h,r.html(f),m.about&&s.text(m.about),m.infoUrl){var p=m.infoUrl;p.lastIndexOf("/");o.attr("href",p),c.attr("href","https://facebook.com/sharer.php?u="+p),u.attr("href","https://twitter.com/intent/tweet?text="+t.summary+"&url="+p+"&via=skg_tech&related=skg_tech")}return e.find(".loading").addClass("hide"),e.html()},r.prototype._parseDesc=function(e){var t={venue:null,infoUrl:null,mapUrl:null,about:null,image:null,language:null,rest:""};if(!e)return t;var n=e.split("\n");return 1===n.length&&(n=e.split("<br>")),n.forEach(function(e){if(e.length){var n=e.indexOf(":");if(-1!==n){var a=e.substr(0,n).toLowerCase().trim(),i=e.substr(n+1).trim();switch(a){case"venue":t.venue=this._stripHtml(i);break;case"info":t.infoUrl=this._stripHtml(i);break;case"map":t.mapUrl=this._stripHtml(i);break;case"about":t.about=i;break;case"language":t.language=i;break;case"image":t.image=this._stripHtml(i);break;default:t.rest+=e+"<br />"}}}},this),t},r.prototype._stripHtml=function(e){var t=document.createElement("DIV");t.innerHTML=e;var n=t.textContent||t.innerText||"";return n.trim()}},{"./util":6,calendarth:8}],3:[function(e,t,n){"use strict";!function(){var e={};e.mceInit=function(){var t={url:"https://datablaster.us2.list-manage.com/subscribe/post-json?u=249dbe460c3c1857a489dde05&amp;id=b926e92856&c=?",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"};$("#mc-embedded-subscribe-form").submit(function(n){$(".response").hide(),n.preventDefault();var a=this.EMAIL.value;return t.data=$(this).serialize(),t.success=function(t){e.mceSuccess(t,a)},$(this).find("button").text("loading"),$.ajax(t),!1})},e.mceSuccess=function(e){if("success"===e.result)return $("button").text("Done!"),void $(".newsletter-error").hide();var t,n=-1;try{var a=e.msg.split(" - ",2);if(void 0===a[1])t=e.msg;else{var i=parseInt(a[0],10);i.toString()===a[0]?(n=a[0],t=a[1]):(n=-1,t=e.msg)}}catch(r){n=-1,t=e.msg}console.log(e),console.log("here"),$("button").text("Go"),$(".newsletter-error").show(),$(".newsletter-error").html("<p>"+t+"</p>")},e.mceInit()}()},{}],4:[function(e,t,n){var a=t.exports=function(){};a.X_API_KEY="DdBItuHAoE1HE36jjEdmh4Pbx8QpCgDh6Te60gnz",a.SUBSCRIBE_URL="https://pv201ybrq8.execute-api.eu-west-1.amazonaws.com/prod/slack",a.prototype.init=function(e){if(!e.emailField)throw"Must set an input element selector";if(!e.cta)throw"Must set a Call to Action element selector";this.$emailEl=$(e.emailField),this.$ctaEl=$(e.cta),this.$formEl=$(e.form),this.attachEvents()},a.prototype.attachEvents=function(){this.$ctaEl.on("click",this.handleFormSubmit.bind(this)),this.$formEl.on("submit",this.handleFormSubmit.bind(this))},a.prototype.handleFormSubmit=function(e){var t=this;e.preventDefault();var n=t.$emailEl.val();t.$ctaEl.button("loading"),t.subscribe(n,function(e){if($(".slack-alert").addClass("hidden"),e)switch(t.$ctaEl.button("reset"),e){case"emptyEmail":$(".slack-alert.slack-invalid-email").removeClass("hidden");break;case"wrongEmail":$(".slack-alert.slack-invalid-email").removeClass("hidden");break;case"alreadySubscribed":$(".slack-alert.slack-already-subscribed").removeClass("hidden")}else $(".slack-alert.slack-success").removeClass("hidden"),$(".slack-email").addClass("hidden"),$(".slack-submit").addClass("hidden"),t.$ctaEl.button("reset")})},a.prototype.subscribe=function(e,t){return e&&e.length?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void $.ajax({method:"GET",url:a.SUBSCRIBE_URL,headers:{"x-api-key":a.X_API_KEY},data:{email:e}}).success(function(e){e.error?("already_in_team"===e.error&&t("alreadySubscribed"),"already_invited"===e.error&&t("alreadySubscribed")):t(null)}).error(function(){t("err")}):(t("wrongEmail"),!1):(t("emptyEmail"),!1)}},{}],5:[function(e,t,n){!function(e){"use strict";function t(){if(e(".navbar").length){var t=e(".navbar").offset().top;e(".navbar").affix({offset:{top:t}})}}function n(){e(".communities_row").length&&e(".communities_row").imagesLoaded(function(){e(".communities_row").isotope({itemSelector:".community-listing",layoutMode:"masonry",masonry:{columnWidth:".community-sizer"}})})}function a(){e(".causes_container").length&&e(".causes_container").imagesLoaded(function(){e(".causes_container").isotope({itemSelector:".cause-item",layoutMode:"masonry",masonry:{columnWidth:".grid-sizer"}}),e(".causes-filter li").on("click",function(){e(".causes-filter li").removeClass("active"),e(this).addClass("active");var t=e(this).attr("data-filter");e(".causes_container").isotope({filter:t})})})}t(),n(),a()}(jQuery)},{}],6:[function(e,t,n){var a=t.exports={},i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sub"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.nl2br=function(e){return"string"!=typeof e?"":e.split("\n").join("<br />")},a.formatDate=function(e,t){var n,s,o=!1;e.dateTime?(n=new Date(e.dateTime),s=new Date(t.dateTime)):(o=!0,n=new Date(e.date),s=new Date(t.date),s-=11e6,s=new Date(s));var l=i[n.getDay()];return l+=", "+r[n.getMonth()],l+=" "+n.getDate(),o?l+=n.getDate()===s.getDate()&&n.getMonth()===s.getMonth()?", All day event":" - "+i[s.getDay()]+" "+s.getDate():(l+=" | "+n.getHours()+":"+a.twoDigit(n.getMinutes()),l+=" - "+s.getHours()+":"+a.twoDigit(s.getMinutes())),l},a.getDate=function(e){var t,n=!1;e.dateTime?t=new Date(e.dateTime):(n=!0,t=new Date(e.date));var a="";return a+=t.getDate(),a+=" "+r[t.getMonth()]},a.getTime=function(e){var t,n=!1;e.dateTime?t=new Date(e.dateTime):(n=!0,t=new Date(e.date));var i="";return n?"All Day":(i+=t.getHours(),i+=":"+a.twoDigit(t.getMinutes()))},a.twoDigit=function(e){var t=e+"";return 1===t.length?"0"+t:t}},{}],7:[function(e,t,n){var a=e("./item"),i=t.exports=function(e){this.options=e||{},this.apiKey=this.options.apiKey||null,this.calendarId=this.options.calendarId||null,this.maxResults=this.options.maxResults||20};i.prototype.fetch=function(e){var t="https://www.googleapis.com/calendar/v3/calendars/";t+=this.calendarId+"/events?key=",t+=this.apiKey;var n=new Date;t+="&orderBy=startTime",t+="&singleEvents=true",t+="&timeMin="+n.toISOString(),t+="&maxResults="+this.maxResults,$.ajax({type:"GET",url:t,crossDomain:!0,dataType:"json"}).done(function(t){var n=new a(t);e(null,n)}).fail(function(t,n,a){e(a)})},i.prototype.getEventUrl=function(e){var t=e.htmlLink.split("="),n="http://www.google.com/calendar/event?action=TEMPLATE&tmeid=";return n+=t[1],n+="&tmsrc=",n+=encodeURIComponent(e.organizer.email)}},{"./item":9}],8:[function(e,t,n){var a=e("./calendarth");t.exports=function(e){return new a(e)}},{"./calendarth":7}],9:[function(e,t,n){var a=t.exports=function(e){return e};a.prototype.get=function(e){return e?this.calendarObj[e]:this.calendarObj}},{}]},{},[1]);
//# sourceMappingURL=app.js.map
