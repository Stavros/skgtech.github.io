!function a(i,r,s){function o(t,e){if(!r[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=r[t]={exports:{}},i[t][0].call(n.exports,function(e){return o(i[t][1][e]||e)},n,n.exports,a,i,r,s)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)o(s[e]);return o}({1:[function(e,t,n){var a=e("./calendar"),i=e("./slack");e("./theme"),e("./newsletter"),(new a).init(),(new i).init({emailField:".slack-email",cta:".slack-submit",form:".slack-form"})},{"./calendar":2,"./newsletter":3,"./slack":4,"./theme":5}],2:[function(e,t,n){var a=e("calendarth"),m=e("./util"),r=t.exports=function(){this.$eventsContainer=null,this.$eventItem=null,this.$error=null};r.MAX_EVENTS_SHOW=8,r.MAX_FUTURE_EVENT=5184e6,r.prototype.init=function(){this.$eventsContainer=$("#upcoming-events"),this.$eventItem=$("#event-item"),this.$error=$("#agenda-error"),this.calendarth=a({apiKey:"AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w",calendarId:"2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com",maxResults:12}),this.calendarth.fetch(this._handleCalResult.bind(this))},r.prototype._handleCalResult=function(e,t){var n,a,i;this.$eventsContainer.empty(),e?this.$eventsContainer.append(this.$error.clone().removeClass("hide")):(n=[],a=0,i="",t.items.forEach(function(e){new Date(e.start.dateTime)-Date.now()>r.MAX_FUTURE_EVENT||a>=r.MAX_EVENTS_SHOW||-1<n.indexOf(e.summary)||(n.push(e.summary),i+=this._assignValues(this.$eventItem.clone(),e),a++)},this),i+="",this.$eventsContainer.append(i),$(".upcoming_events").length&&$(".upcoming_events").imagesLoaded(function(){$("#upcoming-events").isotope({itemSelector:".upcoming_events",layoutMode:"masonry",masonry:{columnWidth:".upcoming_events_sizer"}})}))},r.prototype._assignValues=function(e,t){e.find("div.upcoming_events").removeClass("hide");var n=e.find(".event_title span"),a=e.find(".upcoming_label.label span"),i=e.find(".event_time_loc .location"),r=e.find(".event_summery"),s=e.find(".event_title a"),o=e.find(".event_cover_photo img"),l=e.find(".facebook-url"),c=e.find(".twitter-url"),u=this._parseDesc(t.description);u.image?o.attr("src",u.image):o.attr("src","/assets/img/placeholders/event_image_placeholder.jpg"),n.text(t.summary);n=m.getDate(t.start)+" - "+m.getTime(t.start);a.text(n);a=null,n=null,a=u.venue||t.location;return u.mapUrl?(n='<a href="'+u.mapUrl+'" target="_blank">',n+=a,n+="</a>"):n=a,i.html(n),u.about&&r.text(u.about),u.infoUrl&&((u=u.infoUrl).lastIndexOf("/"),s.attr("href",u),l.attr("href","https://facebook.com/sharer.php?u="+u),c.attr("href","https://twitter.com/intent/tweet?text="+t.summary+"&url="+u+"&via=skg_tech&related=skg_tech")),e.find(".loading").addClass("hide"),e.html()},r.prototype._parseDesc=function(e){var i={venue:null,infoUrl:null,mapUrl:null,about:null,image:null,language:null,rest:""};if(!e)return i;var t=e.split("\n");return(t=1===t.length?e.split("<br>"):t).forEach(function(e){if(e.length){var t=e.indexOf(":");if(-1!==t){var n=e.substr(0,t).toLowerCase().trim(),a=e.substr(t+1).trim();switch(n){case"venue":i.venue=this._stripHtml(a);break;case"info":i.infoUrl=this._stripHtml(a);break;case"map":i.mapUrl=this._stripHtml(a);break;case"about":i.about=a;break;case"language":i.language=a;break;case"image":i.image=this._stripHtml(a);break;default:i.rest+=e+"<br />"}}}},this),i},r.prototype._stripHtml=function(e){var t=document.createElement("DIV");return t.innerHTML=e,(t.textContent||t.innerText||"").trim()}},{"./util":6,calendarth:8}],3:[function(e,t,n){"use strict";var a;(a={mceInit:function(){var n={url:"https://datablaster.us2.list-manage.com/subscribe/post-json?u=249dbe460c3c1857a489dde05&amp;id=b926e92856&c=?",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"};$("#mc-embedded-subscribe-form").submit(function(e){$(".response").hide(),e.preventDefault();var t=this.EMAIL.value;return n.data=$(this).serialize(),n.success=function(e){a.mceSuccess(e,t)},$(this).find("button").text("loading"),$.ajax(n),!1})},mceSuccess:function(t){if("success"===t.result)return $("button").text("Done!"),void $(".newsletter-error").hide();try{var n,e=t.msg.split(" - ",2);n=void 0===e[1]?t.msg:parseInt(e[0],10).toString()===e[0]?(e[0],e[1]):t.msg}catch(e){n=t.msg}console.log(t),console.log("here"),$("button").text("Go"),$(".newsletter-error").show(),$(".newsletter-error").html("<p>"+n+"</p>")}}).mceInit()},{}],4:[function(e,t,n){var a=t.exports=function(){};a.X_API_KEY="DdBItuHAoE1HE36jjEdmh4Pbx8QpCgDh6Te60gnz",a.SUBSCRIBE_URL="https://pv201ybrq8.execute-api.eu-west-1.amazonaws.com/prod/slack",a.prototype.init=function(e){if(!e.emailField)throw"Must set an input element selector";if(!e.cta)throw"Must set a Call to Action element selector";this.$emailEl=$(e.emailField),this.$ctaEl=$(e.cta),this.$formEl=$(e.form),this.attachEvents()},a.prototype.attachEvents=function(){this.$ctaEl.on("click",this.handleFormSubmit.bind(this)),this.$formEl.on("submit",this.handleFormSubmit.bind(this))},a.prototype.handleFormSubmit=function(e){var t=this;e.preventDefault();e=t.$emailEl.val();t.$ctaEl.button("loading"),t.subscribe(e,function(e){if($(".slack-alert").addClass("hidden"),e)switch(t.$ctaEl.button("reset"),e){case"emptyEmail":case"wrongEmail":$(".slack-alert.slack-invalid-email").removeClass("hidden");break;case"alreadySubscribed":$(".slack-alert.slack-already-subscribed").removeClass("hidden")}else $(".slack-alert.slack-success").removeClass("hidden"),$(".slack-email").addClass("hidden"),$(".slack-submit").addClass("hidden"),t.$ctaEl.button("reset")})},a.prototype.subscribe=function(e,t){return e&&e.length?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void $.ajax({method:"GET",url:a.SUBSCRIBE_URL,headers:{"x-api-key":a.X_API_KEY},data:{email:e}}).success(function(e){e.error?("already_in_team"===e.error&&t("alreadySubscribed"),"already_invited"===e.error&&t("alreadySubscribed")):t(null)}).error(function(){t("err")}):(t("wrongEmail"),!1):(t("emptyEmail"),!1)}},{}],5:[function(e,t,n){!function(t){"use strict";var e;t(".navbar").length&&(e=t(".navbar").offset().top,t(".navbar").affix({offset:{top:e}})),t(".communities_row").length&&t(".communities_row").imagesLoaded(function(){t(".communities_row").isotope({itemSelector:".community-listing",layoutMode:"masonry",masonry:{columnWidth:".community-sizer"}})}),t(".causes_container").length&&t(".causes_container").imagesLoaded(function(){t(".causes_container").isotope({itemSelector:".cause-item",layoutMode:"masonry",masonry:{columnWidth:".grid-sizer"}}),t(".causes-filter li").on("click",function(){t(".causes-filter li").removeClass("active"),t(this).addClass("active");var e=t(this).attr("data-filter");t(".causes_container").isotope({filter:e})})})}(jQuery)},{}],6:[function(e,t,n){var r=t.exports={},s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sub"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.nl2br=function(e){return"string"!=typeof e?"":e.split("\n").join("<br />")},r.formatDate=function(e,t){var n,a=!1,i=e.dateTime?(n=new Date(e.dateTime),new Date(t.dateTime)):(a=!0,n=new Date(e.date),i=new Date(t.date),i-=11e6,new Date(i)),t=s[n.getDay()];return t+=", "+o[n.getMonth()],t+=" "+n.getDate(),a?n.getDate()===i.getDate()&&n.getMonth()===i.getMonth()?t+=", All day event":t+=" - "+s[i.getDay()]+" "+i.getDate():(t+=" | "+n.getHours()+":"+r.twoDigit(n.getMinutes()),t+=" - "+i.getHours()+":"+r.twoDigit(i.getMinutes())),t},r.getDate=function(e){var t=e.dateTime?new Date(e.dateTime):new Date(e.date),e="";return e+=t.getDate(),e+=" "+o[t.getMonth()]},r.getTime=function(e){var t=!1,n=e.dateTime?new Date(e.dateTime):(t=!0,new Date(e.date)),e="";return t?"All Day":(e+=n.getHours(),e+=":"+r.twoDigit(n.getMinutes()))},r.twoDigit=function(e){e+="";return 1===e.length?"0"+e:e}},{}],7:[function(e,t,n){var i=e("./item"),t=t.exports=function(e){this.options=e||{},this.apiKey=this.options.apiKey||null,this.calendarId=this.options.calendarId||null,this.maxResults=this.options.maxResults||20};t.prototype.fetch=function(a){var e="https://www.googleapis.com/calendar/v3/calendars/";e+=this.calendarId+"/events?key=",e+=this.apiKey,e+="&orderBy=startTime",e+="&singleEvents=true",e+="&timeMin="+(new Date).toISOString(),e+="&maxResults="+this.maxResults,$.ajax({type:"GET",url:e,crossDomain:!0,dataType:"json"}).done(function(e){e=new i(e);a(null,e)}).fail(function(e,t,n){a(n)})},t.prototype.getEventUrl=function(e){var t="http://www.google.com/calendar/event?action=TEMPLATE&tmeid=";return t+=e.htmlLink.split("=")[1],t+="&tmsrc=",t+=encodeURIComponent(e.organizer.email)}},{"./item":9}],8:[function(e,t,n){var a=e("./calendarth");t.exports=function(e){return new a(e)}},{"./calendarth":7}],9:[function(e,t,n){(t.exports=function(e){return e}).prototype.get=function(e){return e?this.calendarObj[e]:this.calendarObj}},{}]},{},[1]);
//# sourceMappingURL=app.js.map
